<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MAX22088/MAX22288 Device Driver API Reference Manual: Stack with MAX22x88 example</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">MAX22088/MAX22288 Device Driver API Reference Manual<span id="projectnumber">&#160;1.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('md__2github_2workspace_2examples_2two__nodes_2README.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Stack with MAX22x88 example</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md0"></a> This example demonstrates the use of MAX22088/MAX22288 drivers and protocol stack.</p>
<p>The application consistis of two MAX32670 microcontrollers connected via a MAX22088 evaluation kit. The devices exchange data in response to input from the user.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
The Setup</h1>
<p>The devies required for this example are:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Name   </th><th class="markdownTableHeadNone">Device    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">MCU 1   </td><td class="markdownTableBodyNone">MAX32670 EvKit Rev B    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">MCU 2   </td><td class="markdownTableBodyNone">MAX32670 EvKit Rev B    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">HBS   </td><td class="markdownTableBodyNone">MAX22088 EvKit B    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">PS1   </td><td class="markdownTableBodyNone">18 V / 200 mA power supply    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">PS2   </td><td class="markdownTableBodyNone">6 V / 200 mA power supply   </td></tr>
</table>
<p>The boards are configured as follows:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Device   </th><th class="markdownTableHeadNone">Configuration    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">HBS   </td><td class="markdownTableBodyNone">JP1 Open<br  />
JP2 1-2<br  />
JP3 1-2<br  />
JP4 1-2<br  />
JP5 Open<br  />
JP6 Open<br  />
JP7 Open<br  />
JP8 1-2<br  />
JP9 1-2<br  />
JP11 Open<br  />
JP12 1-2<br  />
JP13 Open<br  />
JP14 Open    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">MCU n   </td><td class="markdownTableBodyNone">JP4 TX0<br  />
JP1 1-2<br  />
JP2 1-2   </td></tr>
</table>
<p>Make the following connections:</p>
<ul>
<li>MCU 1 is connected to HBS's master circuit</li>
<li>MCU 2 is connected to HBS's remote circuit</li>
</ul>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Device A   </th><th class="markdownTableHeadNone">Pin A   </th><th class="markdownTableHeadNone">Device B   </th><th class="markdownTableHeadNone">Pin B    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">HBS   </td><td class="markdownTableBodyNone">RST1   </td><td class="markdownTableBodyNone">MCU 1   </td><td class="markdownTableBodyNone">P0.26    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">HBS   </td><td class="markdownTableBodyNone">DIN1   </td><td class="markdownTableBodyNone">MCU 1   </td><td class="markdownTableBodyNone">P0.15    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">HBS   </td><td class="markdownTableBodyNone">DOUT1   </td><td class="markdownTableBodyNone">MCU 1   </td><td class="markdownTableBodyNone">P0.14    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">HBS   </td><td class="markdownTableBodyNone">GND1   </td><td class="markdownTableBodyNone">MCU 1   </td><td class="markdownTableBodyNone">GND    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">HBS   </td><td class="markdownTableBodyNone">RST2   </td><td class="markdownTableBodyNone">MCU 2   </td><td class="markdownTableBodyNone">P0.26    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">HBS   </td><td class="markdownTableBodyNone">DIN2   </td><td class="markdownTableBodyNone">MCU 2   </td><td class="markdownTableBodyNone">P0.15    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">HBS   </td><td class="markdownTableBodyNone">DOUT2   </td><td class="markdownTableBodyNone">MCU 2   </td><td class="markdownTableBodyNone">P0.14    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">HBS   </td><td class="markdownTableBodyNone">GND2   </td><td class="markdownTableBodyNone">MCU 2   </td><td class="markdownTableBodyNone">GND   </td></tr>
</table>
<p>HBS master's circuit provides the Home Bus line that powers all devices. The HBS remote and master circuit should be connected with twisted pair cables as follows:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Device A   </th><th class="markdownTableHeadNone">Pin A   </th><th class="markdownTableHeadNone">Device B   </th><th class="markdownTableHeadNone">Pin B    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">HBS   </td><td class="markdownTableBodyNone">H1+   </td><td class="markdownTableBodyNone">HBS   </td><td class="markdownTableBodyNone">H2+    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">HBS   </td><td class="markdownTableBodyNone">H1-   </td><td class="markdownTableBodyNone">HBS   </td><td class="markdownTableBodyNone">H2-   </td></tr>
</table>
<p>The power supplies are connected to HBS's master circuit.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Device A   </th><th class="markdownTableHeadNone">Pin A   </th><th class="markdownTableHeadNone">Device B   </th><th class="markdownTableHeadNone">Pin B    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">PS1   </td><td class="markdownTableBodyNone">+   </td><td class="markdownTableBodyNone">HBS   </td><td class="markdownTableBodyNone">XFMR_IN    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">PS1   </td><td class="markdownTableBodyNone">-   </td><td class="markdownTableBodyNone">HBS   </td><td class="markdownTableBodyNone">GND1    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">PS2   </td><td class="markdownTableBodyNone">+   </td><td class="markdownTableBodyNone">HBS   </td><td class="markdownTableBodyNone">VRAW1    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">PS2   </td><td class="markdownTableBodyNone">-   </td><td class="markdownTableBodyNone">HBS   </td><td class="markdownTableBodyNone">GND1   </td></tr>
</table>
<p>A device behaves as slave by default. Configure MCU 2 as the master with the following connection:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Device A   </th><th class="markdownTableHeadNone">Pin A   </th><th class="markdownTableHeadNone">Device B   </th><th class="markdownTableHeadNone">Pin B   </th><th class="markdownTableHeadNone">Note    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">MCU 2   </td><td class="markdownTableBodyNone">P0.12   </td><td class="markdownTableBodyNone">MCU 2   </td><td class="markdownTableBodyNone">GND   </td><td class="markdownTableBodyNone">Configures device as master.   </td></tr>
</table>
<p>Finally, power MCU 1 and MCU 2 through a PC and monitor the information sent via UART through a serial monitor application.</p>
<h1><a class="anchor" id="autotoc_md2"></a>
The Application</h1>
<p>The two devices connected via Home Bus take on different roles (master or slave) and demonstrate the exchange of data upon user interaction. During execution, both devices provide text feedback via UART at 115200 baud.</p>
<p>The application defines two roles for the microcontrollers. MCU 1 is configured as the slave, and MCU 2 is configured as the master. The user interact with each device via the SW3 general purpose switch on the MAX32670 evaluation kit.</p>
<p>The application execution flow is as follows:</p>
<ul>
<li>MCU 1 and MCU 2 boot up.</li>
<li>MCU 1 is configured as the slave, MCU 2 is configured as the master.</li>
<li>User presses SW3 on MCU 2.</li>
<li>MCU 2 sends a request to MCU 1.</li>
<li>MCU 1 processes the request, reads the state of its SW3 button.</li>
<li>MCU 1 replies to MCU 2 with the button state</li>
<li>MCU 2 processes the response from MCU 1.</li>
</ul>
<p>During execution, detailed information is sent via UART and can be read from a PC.</p>
<h1><a class="anchor" id="autotoc_md3"></a>
Building and Flashing</h1>
<p>The application has been developed and tested with the <a href="https://github.com/analogdevicesinc/msdk/releases/tag/v2024_02">Analog Devices MSDK February 2024 Release</a> and the build files are for the <a href="https://github.com/analogdevicesinc/VSCode-Maxim">VSCode-Maxim</a> Visual Studio Code extension. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
